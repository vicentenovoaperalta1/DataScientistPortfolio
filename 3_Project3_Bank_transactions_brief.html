<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bank Transactions - Unsupervised Learning | Project Brief</title>

    <!-- Link the same stylesheet -->
    <link rel="stylesheet" href="./css/main.css" />

    <!-- Add a your png Logo to the assets folder and change the href attr accordingly  -->
    <link rel="icon" type="image/png" href="./assets/devfolio-logo.png" />

    <!-- Include FontAwesome if icons are used -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/all.min.css"
      integrity="sha512-SzlrxWUlpfuzQ+pcUCosxcglQRNAq/DZjVsC0lE40xsADsfeQoEypE+enwcOiGjk/bSuGGKHEyjSoQ1zVisanQ=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />

    <!-- Include any additional scripts as needed -->
    <script defer src="./javascript/scrollreveal.min.js"></script>
    <script defer src="./javascript/scrollveal.js"></script>

    <style>
      /* Style for positioning the image next to the title */
      .hero-title-wrapper {
        display: flex;
        align-items: center;
      }

      .hero-title {
        margin-right: 20px;
      }

      .hero-title img {
        max-width: 150px;
        height: auto;
      }

      /* Style for section titles */
      .section-title-small {
        font-size: 1.2rem;
        font-weight: bold;
      }

      /* Style for image results */
      .image-results img {
        width: 100%;
        max-width: 500px;
        margin: 10px 0;
      }

      .section-container {
        margin-bottom: 40px;
      }
    </style>
  </head>
  <body>
    <!-- Hero Section -->
    <div id="hero">
      <section class="container">
        <div class="hero-title-wrapper">
          <h1 class="hero-title">
            Bank Transactions - Unsupervised Learning <br />
            <span class="text-color-main">Project Overview</span>
          </h1>
          <img src="./assets/Project3/Bank_transactions.png" alt="Bank transactions Image" width="400" height="400" style="margin-left: 100px;"/>
        </div>
        <p class="hero-cta">
          <a class="cta-btn cta-btn--hero" href="index.html">Back to Portfolio</a>
        </p>
      </section>
    </div>

    <!-- Project Description Section -->
    <section id="project-details" class="section-container">
      <div class="container">
        <h2 class="section-title">About the Project</h2>
        <p class="about-wrapper__info-text">
          This project uses unsupervised learning to analyze bank transaction data. It applies K-Means clustering to identify client
                 spending patterns for targeted marketing and Isolation Forest to detect unusual transactions, aiding in fraud detection 
                 and risk management.
        </p>
      </div>
    </section>

    <!-- Libraries Used Section -->
    <section id="libraries-used" class="section-container">
      <div class="container">
        <h3 class="section-title-small" style="font-size: 2em;">Libraries Used</h3>
        <ul>
          <p>Pandas</p>
          <p>Numpy</p>
          <p>Matplotlib</p>
          <p>Math</p>
          <p>Seaborn</p>
          <p>Google.colab</p>
          <p>Sklearn</p>
        </ul>
      </div>
    </section>

    <!-- Data Source Section -->
    <section id="data-source" class="section-container">
      <div class="container">
        <h3 class="section-title-small" style="font-size: 2em;">Data Source</h3>
        <p>Unknown: privately owned</p>
        <p>Link: -</p>
      </div>
    </section>

    <!-- Exploratory Data Analysis Section -->
<section id="exploratory-data-analysis" class="section-container">
  <div class="container">
    <h3 class="section-title-small" style="font-size: 2em;">Exploratory Data Analysis</h3>
    <br> <!-- Line break added here -->
    
    <section>
      <div class="eda-figure">
        <!-- First Image -->
    <h3 class="section-title-small" style="font-size: 1.5em;">Dataframe 1</h3>
        <figure>
          <img src="./assets/Project3/Dataframe1.png" alt="Dataframe 1 Image" style="width: 100%; max-width: 1000px;">
        </figure>
    
        <p> Dataframe 1 is a table of transactions. It contains information about each transaction, in 4.260.904 rows and 10 columns. 
          Some of the important columns are amounts of transactions, the fraud mark and the card number, 
          which will be used to merge with the customer table. There are also many other relevant columns.
        </p>
      </div>
    </section>    
    
    <section>
      <h3 class="section-title-small" style="font-size: 1.5em;">Dataframe 2</h3>
      <div class="eda-figure">
        <!-- Second Image -->
        <figure>
          <img src="./assets/Project3/Dataframe2.png" alt="Dataframe 2 Image" style="width: 100%; max-width: 1000px;">
        </figure>
    
        <p> Dataframe 2 is a table of customers. It contains information about each customer. It has 1.000 rows and 15 columns.
          Some of the important columns are gender, job, date of birth and cc_num which will be used to merge with the transaction table.
        </p>
      </div>
    </section>  
  </div>
</section>          

<section id="Preprocessing" class="section-container">
  <div class="container">
    <section>
      <h3 class="section-title-small" style="font-size: 2em;">Preprocessing</h3>
      <div class="eda-figure">
        <!-- Part 1 introduction -->
        <br>
        <p><strong>Fraud:</strong> The relation between fraud and the different merchants was analyzed, to see if maybe 
           frauds were more related to a set of particular merchants. None relation was found. Therefore, fraud transactions
           were filtered out.</p>
        <br>
        <p><strong>Unique customers:</strong> transaction data was examined and transformed to determine how many unique 
           customers were there in the transaction table. There are 1.000 customers, but only 972 have transactions. </p>
        <br>
        <p><strong> Categorical data:</strong> there are many categorical columns in the transaction dataframe, but not all
           of those will be used. "Category" has only 14 transaction categories, like "entertainment", "shopping_pos" and "grocery_pos", so
           it will probably be a useful column. On the other hand, "merchant" column has 21.977 different categories and "job" 
           has 507 categories, so those columns are not going to be used.</p>
        <br>
        <p><strong>DOB:</strong> was transformed into age, so that its more meaningful and easy to use. </p>
        <br>
        <p><strong>Gender:</strong> gender column was transformed into numerical categories with One Hot Encoding. </p>
        </p>
        <br>
        <p><strong>Model 1 transaction aggregation:</strong> the transaction data was aggregated using maximum function. Afterwards, it has
          been merged into the customer data.</p>
        <br>
        <p><strong>Model 2 transaction aggregation:</strong> the transaction data was aggregated using average function. Afterwards, it has
          been merged into the customer data.</p>
          <br>
          <p><strong>Normalization:</strong> the data was normalized so that it can be used more efficiently on the K-means model and so that
             its easier to visualize in a radar plot. </p>
          <br>
          <p><strong>Filtering:</strong> There were more than 4.000.000 transactions, which was too much data to handle for the 
            Isolation Forest in Google Colab. Therefore, filtered some of the transactions. I did this looking into the distribution of the
            transaction's amount and dropping the lower amounts, since they hold less risk. </p>
        <br>
        <br>
      </div>
    </section>
  </div>
</section>
    
<section id="Results - Clustering to identify client spending patterns for targeted marketing" class="section-container">
  <div class="container">
      <h3 class="section-title-small" style="font-size: 2em;">Results - Clustering to identify client spending patterns for targeted marketing</h3>
      <br>
        <h3 class="section-title-small" style="font-size: 1.5em;">Model 1: K-means with maximum aggregation function</h3>
        <br>
        <figure>
          <img src="./assets/Project3/Model1_separated.png" alt="Kmeans1 separated Image" style="width: 100%; max-width: 1000px;">
        </figure>
        <figure>
          <img src="./assets/Project3/Model1_together.png" alt="Kmeans1 together Image" style="width: 100%; max-width: 450px;">
        </figure>
        
        <p>
        <br>
          The first image shows each cluster separately and the second one shows all of the clusters together. In some cases it may seem 
          like they are not represenging the same clusters, but its just due to the different scales. This clustering model doesnÂ´t give
          very meaningful or clear results. The difference between clusters is not significant or meaningful.
        <br>
        <br>

        <h3 class="section-title-small" style="font-size: 1.5em;">Model 2: K-means with average aggregation function</h3>
        <br>
        <figure>
          <img src="./assets/Project3/Model2_separated.png" alt="Kmeans2 separated Image" style="width: 100%; max-width: 1000px;">
        </figure>
        <figure>
          <img src="./assets/Project3/Model2_together.png" alt="Kmeans2 together Image" style="width: 100%; max-width: 450px;">
        </figure>

        <p>Again, the first image shows each cluster separately and the second one shows all of the clusters together. Now, in this case, 
          clustering results are much better. The difference between clusters is significantly clearer. It is easy to see that the spending
          behavior is different for each cluster. </p>
        <br>
        <p> Additionally, with the help of the following charts we can better define the three clusters:       
        <br>
        <br>
        <figure>
          <img src="./assets/Project3/Model2_count.png" alt="Kmeans2 count Image" style="width: 100%; max-width: 450px;">
        </figure>
        <figure>
          <img src="./assets/Project3/Model2_gender.png" alt="Kmeans2 gender Image" style="width: 100%; max-width: 450px;">
        </figure>
        <figure>
          <img src="./assets/Project3/Model2_age.png" alt="Kmeans2 age Image" style="width: 100%; max-width: 450px;">
        </figure>
        <p>
        <br>
        <strong>Cluster 0:</strong> 30% of the sample. 85% males, mostly aged from [20,50], with a mean of 35. These clients are the 
        ones who spend the less, in average, just $778. They tend to spend in a balanced manner, though they do spend a bit more on 
        categories like travel and kids_pets and a bit less on shopping.
        <br>  
        <strong>Cluster 1:</strong> 20% of the sample. 97% females, mostly aged from [20, 55], with a mean of 39. This is the group of 
        customers who spends the most, in average, $1263. They also seem to be quite balanced on their spending across categories. 
        However, they spend a bit more on categories like: gas_transport, groceries, misc_pos, misc_net. Additionally, they spend a bit
         less in categories like: entertainment, food_dining and travel.
        <br>  
        <strong>Cluster 2:</strong> 50% of the sample. 55% males, mostly aged from [50, 90], with a mean of 66. This type of customer 
        spends $917 in average. They spend the most on entertainment, food_dining and shopping. They spend the less on gas_transport,
         groceries, misc_pos and misc_net. </p>
        <br>
        </p>
      </section>
  </div>
</section>

      
<section id="Results - Isolation Forest to detect unusual transactions, aiding in fraud detection and risk management" class="section-container">
  <div class="container">
      <h3 class="section-title-small" style="font-size: 2em;">Results - Isolation Forest to detect unusual transactions, aiding in fraud detection and risk management</h3>
      <br>
        <h3 class="section-title-small" style="font-size: 1.5em;">Anomaly Score Distribution</h3>
        <br>
        <figure>
          <img src="./assets/Project3/Model3_Threshold_Visualization.png" alt="Threshold Visualization Image" style="width: 100%; max-width: 450px;">
        </figure>
        
        <p>
        <br>
          The Isolation Forest assigns an Anomaly Score to every datapoint. This plot shows the Anomaly Score distribution. I iterated
          with this model until I found the right threshold shown in this plot.
        </p>
        <br>
        <br>

        <h3 class="section-title-small" style="font-size: 1.5em;">Outliers Distribution</h3>
        <br>
        <figure>
          <img src="./assets/Project3/Model3_Outliers_Distribution.png" alt="Outliers Distribution Image" style="width: 100%; max-width: 450px;">
        </figure>

        <p>This is the distribution between inliers and outliers correspondant to the chosen model and the correct threshold.  </p>
        <br>
        <br>
        <figure>
          <img src="./assets/Project3/Model3_Tsne_Visualization.png" alt="Tsne_Visualization Image" style="width: 100%; max-width: 450px;">
        </figure>
        <p> Finally, this plot shows a t-SNE, t-Distributed Stochastic Neighbor Embedding. The t-SNE algorithm reduces the dataset to
           two dimensions for visualization purposes, preserving the local structure of the data.
        </p>    
        <br>
      </section>    
  </div>
</section>

    <!-- Conclusion Section -->
    <section id="conclusion" class="section-container">
      <div class="container">
        <h2 class="section-title">Conclusion</h2>
        <p> NOT DONE YET  </p>
      </div>
    </section>

    <!-- Footer Section -->
    <footer class="footer">
      <div class="container">
        <a href="#hero" class="back-to-top" aria-label="go back to top">
          <i class="fa fa-angle-up fa-2x" aria-hidden="true"></i>
        </a>
        <p class="footer__text">
          &copy; <span id="year"></span> - Vicente Novoa
        </p>
      </div>
    </footer>

    <!-- JS Script for Dynamic Year -->
    <script>
      document.getElementById("year").textContent = new Date().getFullYear();
    </script>
  </body>
</html>
